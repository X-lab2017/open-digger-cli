# open-digger-cli

> ğŸ“ˆ ä¸€ä¸ªæŸ¥è¯¢ [open-digger][1] æŒ‡æ ‡çš„ CLI å·¥å…·ã€‚

## ğŸ’¡ åŠŸèƒ½ & è·¯çº¿å›¾

- âœ… åŸºç¡€çš„æŒ‡æ ‡æŸ¥è¯¢ï¼Œæ”¯æŒæŒ‡å®šç‰¹å®šçš„æŒ‡æ ‡ã€æ—¶é—´èŒƒå›´ã€‚
- âœ… ç”Ÿæˆ pdf æŠ¥å‘Šï¼Œæ”¯æŒæŒ‡å®šç‰¹å®šçš„æŒ‡æ ‡ã€æ—¶é—´èŒƒå›´ã€‚
- ğŸš§<sup style="color: red;">\*</sup> æ”¯æŒå¯¹è¯å¼äº¤äº’ï¼Œä½¿ç”¨æ›´å‹å¥½ã€‚
- ğŸš§<sup style="color: red;">\*</sup> æ”¯æŒæ›´å¤šçš„æŠ¥å‘Šè¾“å‡ºæ ¼å¼ã€‚
- ğŸš§<sup style="color: red;">\*</sup> ä¸ºç”ŸæˆæŠ¥å‘Šæ·»åŠ **æ’ä»¶ç³»ç»Ÿ**ï¼Œè®©ä½¿ç”¨è€…è‡ªå®šä¹‰æ›´å¤šå†…å®¹ã€‚
- ğŸš§<sup style="color: red;">\*</sup> ä¸ºå‘½ä»¤è¡ŒæŸ¥è¯¢å·¥å…·æ·»åŠ **æ’ä»¶ç³»ç»Ÿ**ï¼Œè®©ä½¿ç”¨è€…è‡ªå®šä¹‰æ›´å¤šå†…å®¹ã€‚

<h6><sup style="color: red;">*</sup>æ ‡è®°åŠŸèƒ½å·²å®ŒæˆåŠŸèƒ½éªŒè¯ï¼Œç”±äºå·¥æœŸï¼Œä¸ä¿è¯åœ¨å†³èµ›æäº¤æ—¶é‡Šå‡º</h6>

## ğŸ§¶ è®¾è®¡æ€è·¯

å‘½ä»¤è¡Œè·å–å‘½ä»¤å’Œå‚æ•°åï¼Œè§£ææ•°æ®ï¼Œæ ¹æ®å­å‘½ä»¤æ‰§è¡Œä¸åŒæ“ä½œï¼ˆåœ¨æ‰§è¡Œæ“ä½œå‰ä¼šå‘ open-digger æä¾›çš„æ•°æ®æœåŠ¡è¿›è¡Œæ•°æ®æ‹‰å–ï¼‰ï¼š

æ•°æ®æŸ¥è¯¢åŠŸèƒ½ï¼šå°†è·å–çš„æ•°æ®æ‰“å°åˆ°å‘½ä»¤è¡Œå·¥å…·ï¼›

æ•°æ®å¯¼å‡ºåŠŸèƒ½ï¼šå°†è·å–çš„æ•°æ®æ ¹æ®å‘½ä»¤ï¼Œä½¿ç”¨ä¸åŒçš„å¼•æ“è¿›è¡Œæ¸²æŸ“ï¼Œå†è¿›è¡Œä¸åŒå½¢å¼çš„å¯¼å‡ºã€‚

åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œopen-digger-cli è®¡åˆ’æä¾›ä¸°å¯Œçš„ hookï¼Œä»¥ä¾¿ç”¨æˆ·æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œæ•°æ®å±•ç¤ºã€‚

## ğŸ’£ å®ç°éš¾ç‚¹

1. æ”¯æŒ `json`ã€`yml` ç­‰é…ç½®æ–‡ä»¶éš¾åº¦è¾ƒä½ï¼Œä½†å¯æ‹“å±•æ€§æœ‰é™ï¼›ç›®å‰è®¡åˆ’æ”¯æŒ `js`ã€`mjs` ç­‰é…ç½®æ–‡ä»¶ï¼Œå¢å¼ºè½¯ä»¶çš„å¯æ‹“å±•æ€§ï¼Œä½†éš¾åº¦è¾ƒä¹‹å‰å¤§å¤§æé«˜ã€‚

2. ç›®å‰è®¡åˆ’æ”¯æŒ pdf å¯¼å‡ºï¼Œæ•°æ®ä¼ é€’åŠæ•°æ®å±•ç¤ºéš¾åº¦éƒ½è¾ƒå¤§ï¼Œpdf æŒ‰é¢„æœŸæ ¼å¼å¯¼å‡ºä¹Ÿå…·æœ‰ä¸€å®šå›°éš¾ã€‚

## ğŸ”§ å®‰è£…

æœ¬å·¥å…·åŸºäº Node.jsï¼Œè¯·åœ¨æœ¬å·¥å…·å‰å®‰è£…å‰ Node.js ç¯å¢ƒã€‚

```bash
npm i -g @stevending1st/open-digger-cli
```

<h6><sup style="color: red;">*</sup>æœ¬å·¥å…·å°šæœªé‡Šå‡ºï¼Œå…·ä½“çš„å®‰è£…å‘½ä»¤è¡Œéœ€è¦ç­‰é‡Šå‡ºæ—¶æœ€ç»ˆç¡®å®šã€‚</h6>

## âŒ¨ï¸ å‘½ä»¤è¡Œä½¿ç”¨

### ç‰ˆæœ¬æŸ¥è¯¢

```bash
digger --version

# æˆ–

digger -v
```

### å¸®åŠ©å‘½ä»¤

#### å…¨å±€å¸®åŠ©

```bash
digger --help

# æˆ–

digger -h
```

### å­å‘½ä»¤å¸®åŠ©

```bash
digger --help <command>

# æˆ–

digger -h <command>
```

`<command>`: å­å‘½ä»¤ï¼Œç›®å‰æ”¯æŒ `chat`ã€`export`

### æŒ‡æ ‡æŸ¥è¯¢

æŸ¥è¯¢æŒ‡å®šä»“åº“/ç”¨æˆ·çš„æŒ‡æ ‡ã€‚

```bash
digger <example> -m <metrics> [-t <time>]
```

- `<example>`ï¼šæŒ‡å®šä¸€ä¸ªä»“åº“æˆ–è€…ç”¨æˆ·ã€‚ä¾‹å¦‚ï¼š`X-lab2017/open-digger`ã€`stevending1st`ã€‚
- `<metrics>`ï¼šæŒ‡å®šæŸ¥è¯¢çš„æŒ‡æ ‡ï¼Œæ”¯æŒå¤šä¸ªæŒ‡æ ‡ï¼Œå¤šä¸ªæŸ¥è¯¢ç”¨ `,` è¿æ¥ã€‚ä¾‹å¦‚ï¼š`openrank`ã€`openrank,activity`ã€‚
  ç›®å‰æ”¯æŒå‚æ•°ï¼š`openrank`ã€`activity`ã€`attention`ã€`active_dates_and_times`ã€`stars`ã€`technical_fork`ã€`participants`ã€`new_contributors`ã€`new_contributors_detail`ã€`inactive_contributors`ã€`bus_factor`ã€`bus_factor_detail`ã€`issues_new`ã€`issues_closed`ã€`issue_comments`ã€`issue_response_time`ã€`issue_resolution_duration`ã€`issue_age`ã€`code_change_lines`ã€`code_change_lines_add`ã€`code_change_lines_remove`ã€`code_change_lines_sum`ã€`change_requests`ã€`change_requests_accepted`ã€`change_requests_reviews`ã€`change_request_response_time`ã€`change_request_resolution_duration`ã€`change_request_age`ã€`activity_details`ã€‚
- `<time>`ï¼šæŸ¥è¯¢çš„æ—¶é—´èŒƒå›´ï¼Œæ ¼å¼ä¸º yyyyMM æˆ– yyyyMM-yyyyMM ã€‚ä¾‹å¦‚ï¼š`202203`ã€`201912-202212`ã€‚

#### æŸ¥è¯¢æŒ‡å®šä»“åº“çš„æŒ‡å®šæŒ‡æ ‡

```bash
digger <example> -m <metrics>
```

ä¾‹å¦‚ï¼š`digger X-lab2017/open-digger -m openrank`

```bash
repo.openrank:  {
  '2020-08': 4.5,
  '2020-09': 4.91,
  '2020-10': 5.59,
  '2020-11': 6.31,
  '2020-12': 9.96,
  '2021-01': 10.61,
  '2021-02': 6.28,
  '2021-03': 4.14,
  '2021-04': 4.44,
  '2021-05': 4.26,
  '2021-06': 6.46,
  '2021-07': 4.84,
  '2021-08': 3.93,
  '2021-09': 3.34,
  '2021-10': 3,
  '2021-11': 2.89,
  '2021-12': 3.33,
  '2022-01': 4.71,
  '2022-02': 4.87,
  '2022-03': 6.06,
  '2022-04': 3.76,
  '2022-05': 4.14,
  '2022-06': 7.67,
  '2022-07': 9.17,
  '2022-08': 8.53,
  '2022-09': 9.96,
  '2022-10': 11.84,
  '2022-11': 14.65,
  '2022-12': 19.36,
  '2023-01': 19.9,
  '2023-02': 40.48,
  '2023-03': 22.05,
  '2023-04': 18.79,
  '2023-05': 18.42,
  '2023-06': 14.3
}
```

#### æŸ¥è¯¢æ—¶é—´èŒƒå›´çš„æŒ‡å®šä»“åº“çš„æŒ‡å®šæŒ‡æ ‡

```bash
digger <example> -m <metrics> -t <time>
```

ä¾‹å¦‚ï¼š`digger X-lab2017/open-digger -m openrank -t 202101-202112`

```bash
repo.openrank:  {
  '2021-01': 10.61,
  '2021-02': 6.28,
  '2021-03': 4.14,
  '2021-04': 4.44,
  '2021-05': 4.26,
  '2021-06': 6.46,
  '2021-07': 4.84,
  '2021-08': 3.93,
  '2021-09': 3.34,
  '2021-10': 3,
  '2021-11': 2.89,
  '2021-12': 3.33
}
```

#### æŸ¥è¯¢æŒ‡å®šä»“åº“çš„æŒ‡å®šæŒ‡æ ‡

```bash
digger <example> -m <metrics>
```

ä¾‹å¦‚ï¼š`digger stevending1st -m openrank`

```bash
user.openrank:  {
  '2017-01': 0.72,
  '2017-02': 0.61,
  '2017-03': 0.52,
  '2017-04': 0.44,
  '2017-05': 0.38,
  '2017-06': 0.32,
  '2017-07': 0.27,
  '2017-08': 0.23,
  '2017-09': 0.2,
  '2017-10': 0.17,
  '2017-11': 0.14,
  '2017-12': 0.12,
  '2018-01': 0.1,
  '2018-02': 0.09,
  '2018-07': 0.98,
  '2018-08': 0.83,
  '2018-09': 0.7,
  '2018-10': 0.6,
  '2018-11': 0.51,
  '2018-12': 0.43,
  '2019-01': 0.37,
  '2019-02': 0.31,
  '2019-03': 0.27,
  '2019-04': 0.23,
  '2019-05': 0.19,
  '2019-06': 0.16,
  '2019-07': 0.14,
  '2019-08': 0.66,
  '2019-09': 0.56,
  '2019-10': 0.48,
  '2019-11': 0.41,
  '2019-12': 0.34,
  '2020-01': 1.01,
  '2020-02': 0.86,
  '2020-03': 0.73,
  '2020-04': 0.49,
  '2020-05': 0.42,
  '2020-06': 0.36,
  '2020-07': 0.3,
  '2020-08': 0.26,
  '2020-09': 0.22,
  '2020-10': 0.39,
  '2020-11': 0.39,
  '2020-12': 0.33,
  '2021-01': 0.48,
  '2021-02': 0.4,
  '2021-03': 1.03,
  '2021-04': 1.48,
  '2021-05': 1.57,
  '2021-06': 1.98,
  '2021-07': 2.01,
  '2021-08': 3.52,
  '2021-09': 3.57,
  '2021-10': 3,
  '2021-11': 2.78,
  '2021-12': 2.36,
  '2022-01': 2,
  '2022-02': 4.01,
  '2022-03': 5.07,
  '2022-04': 2.93,
  '2022-05': 2.1,
  '2022-06': 1.88,
  '2022-07': 1.22,
  '2022-08': 0.76,
  '2022-09': 1.72,
  '2022-10': 4.79,
  '2022-11': 3.66,
  '2022-12': 2.63,
  '2023-01': 1.86,
  '2023-02': 2.93,
  '2023-03': 2.08,
  '2023-04': 3.04,
  '2023-05': 2.9,
  '2023-06': 3.38
}
```

#### æŸ¥è¯¢æ—¶é—´èŒƒå›´çš„æŒ‡å®šç”¨æˆ·çš„æŒ‡å®šæŒ‡æ ‡

```bash
digger <example> -m <metrics> -t <time>
```

ä¾‹å¦‚ï¼š`digger stevending1st -m openrank -t 202101-202112`

```bash
user.openrank:  {
  '2021-01': 0.48,
  '2021-02': 0.4,
  '2021-03': 1.03,
  '2021-04': 1.48,
  '2021-05': 1.57,
  '2021-06': 1.98,
  '2021-07': 2.01,
  '2021-08': 3.52,
  '2021-09': 3.57,
  '2021-10': 3,
  '2021-11': 2.78,
  '2021-12': 2.36
}
```

### å¯¼å‡ºæ–‡ä»¶

```bash
digger export <example> -m <metrics> [-t <time>]
```

- `<example>`ï¼šæŒ‡å®šä¸€ä¸ªä»“åº“æˆ–è€…ç”¨æˆ·ã€‚ä¾‹å¦‚ï¼š`X-lab2017/open-digger`ã€`stevending1st`ã€‚
- `<metrics>`ï¼šæŒ‡å®šæŸ¥è¯¢çš„æŒ‡æ ‡ï¼Œæ”¯æŒå¤šä¸ªæŒ‡æ ‡ï¼Œå¤šä¸ªæŸ¥è¯¢ç”¨ `,` è¿æ¥ã€‚ä¾‹å¦‚ï¼š`openrank`ã€`openrank,activity`ã€‚
  ç›®å‰æ”¯æŒå‚æ•°ï¼š`openrank`ã€`activity`ã€`attention`ã€`active_dates_and_times`ã€`stars`ã€`technical_fork`ã€`participants`ã€`new_contributors`ã€`new_contributors_detail`ã€`inactive_contributors`ã€`bus_factor`ã€`bus_factor_detail`ã€`issues_new`ã€`issues_closed`ã€`issue_comments`ã€`issue_response_time`ã€`issue_resolution_duration`ã€`issue_age`ã€`code_change_lines`ã€`code_change_lines_add`ã€`code_change_lines_remove`ã€`code_change_lines_sum`ã€`change_requests`ã€`change_requests_accepted`ã€`change_requests_reviews`ã€`change_request_response_time`ã€`change_request_resolution_duration`ã€`change_request_age`ã€`activity_details`ã€‚
- `<time>`ï¼šæŸ¥è¯¢çš„æ—¶é—´èŒƒå›´ï¼Œæ ¼å¼ä¸º yyyyMM æˆ– yyyyMM-yyyyMM ã€‚ä¾‹å¦‚ï¼š`202203`ã€`201912-202212`ã€‚

## ğŸ§© æ’ä»¶

æœ¬åº”ç”¨è®¡åˆ’æ”¯æŒ**å¼ºå¤§çš„æ’ä»¶åŠŸèƒ½**ï¼Œæ”¯æŒåœ¨å‘½ä»¤è¡Œå·¥å…·è¿›è¡Œæ•°æ®å±•ç¤ºå’Œç”ŸæˆæŠ¥å‘Šç­‰æµç¨‹ä¸­è°ƒç”¨ api ä»¥è‡ªå®šä¹‰æ˜¾ç¤ºå†…å®¹ã€‚

ä¾‹å­ï¼š

```js
import Table from 'cli-table3';

export default {
  cli: {
    openRank: ({ metric, time, example, data }) => {
      const showData = [];
      for (let key in data) {
        showData.push([key, data[key]]);
      }

      const table = new Table({
        head: ['Time', 'openRank'],
        colWidths: [10, 20]
      });

      table.push(...showData);

      console.log(`${example}'s ${metric}(${time}):`);

      console.log(table.toString());
    }
  }
};
```

åœ¨é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•æ‰§è¡Œï¼š

```bash
digger X-lab2017/open-digger -m openrank -t 202201-202212
```

ç»“æœï¼š

```bash
X-lab2017/open-digger's openrank(202201-202212):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Time     â”‚ openRank           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2022-01  â”‚ 4.71               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2022-02  â”‚ 4.87               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2022-03  â”‚ 6.06               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2022-04  â”‚ 3.76               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2022-05  â”‚ 4.14               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2022-06  â”‚ 7.67               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2022-07  â”‚ 9.17               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2022-08  â”‚ 8.53               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2022-09  â”‚ 9.96               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2022-10  â”‚ 11.84              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2022-11  â”‚ 14.65              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2022-12  â”‚ 19.36              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

[1]: https://github.com/X-lab2017/open-digger
